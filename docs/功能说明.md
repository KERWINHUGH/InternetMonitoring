# 物联网设备监控系统功能说明

## 系统概述
本系统是一个基于Qt开发的物联网设备监控系统，支持用户管理、设备监控、数据查看等功能。

## 用户角色与权限

### 管理员（admin）
- **个人信息管理**：查看和修改个人信息
- **密码修改**：修改登录密码
- **数据管理**：添加、编辑、删除用户和设备
- **数据查看**：查看所有数据表（包括用户表）
- **数据导出**：导出数据为CSV格式
- **系统设置**：访问数据库查看器

### 普通用户（user）
- **个人信息管理**：查看和修改个人信息
- **密码修改**：修改登录密码
- **数据查看**：查看设备、监控数据、告警、系统日志
- **数据导出**：导出数据为CSV格式

## 主要功能模块

### 1. 登录系统
- **用户登录**：支持用户名密码登录
- **用户注册**：新用户注册功能
- **忘记密码**：通过邮箱和手机号验证找回密码
- **会话管理**：自动登出和会话超时提醒

### 2. 个人信息管理
- **信息查看**：显示用户名、邮箱、手机号、昵称、角色
- **信息修改**：修改邮箱、手机号、昵称（用户名不可修改）
- **密码修改**：通过原密码验证后修改新密码
- **格式验证**：邮箱和手机号格式验证

### 3. 数据查看与管理
- **设备管理**：查看、添加、编辑、删除设备信息
- **监控数据**：查看设备监控数据（温度、湿度、CPU、内存、网络）
- **告警管理**：查看系统告警信息
- **系统日志**：查看系统操作日志
- **用户管理**：管理员可管理用户账户

### 4. 权限控制
- **角色区分**：管理员和普通用户不同权限
- **功能限制**：普通用户只能查看数据，管理员可以修改
- **界面适配**：根据用户角色显示不同的功能按钮

## 数据库结构

### users表（用户表）
- username: 用户名（主键）
- password: 密码（SHA-256加密）
- email: 邮箱
- phone: 手机号
- nickname: 昵称
- role: 角色（admin/user）

### devices表（设备表）
- device_id: 设备ID（主键）
- name: 设备名称
- type: 设备类型
- location: 位置
- status: 状态

### monitor_data表（监控数据表）
- id: 自增ID（主键）
- device_id: 设备ID
- timestamp: 时间戳
- temperature: 温度
- humidity: 湿度
- cpu_usage: CPU使用率
- memory_usage: 内存使用率
- network_speed: 网络速度

### alarms表（告警表）
- alarm_id: 告警ID（主键）
- device_id: 设备ID
- timestamp: 时间戳
- type: 告警类型
- description: 告警描述
- level: 告警级别
- status: 状态

### system_logs表（系统日志表）
- log_id: 日志ID（主键）
- timestamp: 时间戳
- type: 日志类型
- content: 日志内容
- username: 操作用户

## 使用流程

### 管理员使用流程
1. 使用管理员账户登录（admin/admin123）
2. 进入管理员控制台
3. 点击"用户管理"进行数据管理
4. 点击"系统设置"查看数据库
5. 可以添加、编辑、删除用户和设备
6. 可以导出数据进行分析

### 普通用户使用流程
1. 注册新账户或使用现有账户登录
2. 进入用户控制台
3. 点击"网络监控"查看数据
4. 点击"个人设置"管理个人信息
5. 可以查看设备状态和监控数据
6. 可以导出数据进行分析

## 安全特性

### 密码安全
- 密码使用SHA-256加密存储
- 密码修改需要验证原密码
- 密码长度限制（6-20位）

### 权限控制
- 基于角色的访问控制
- 普通用户无法访问管理功能
- 管理员账户受保护

### 数据验证
- 邮箱格式验证
- 手机号格式验证
- 输入数据长度限制

## 技术特点

### 界面设计
- 现代化UI设计
- 响应式布局
- 用户友好的交互体验

### 数据管理
- SQLite数据库
- 事务支持
- 数据完整性保护

### 系统架构
- 模块化设计
- 信号槽机制
- 内存管理优化

## 注意事项

1. **数据备份**：建议定期备份数据库文件
2. **权限管理**：谨慎分配管理员权限
3. **密码安全**：定期更换密码
4. **系统维护**：定期清理系统日志
5. **数据导出**：导出数据时注意文件安全

## 故障排除

### 常见问题
1. **登录失败**：检查用户名和密码是否正确
2. **数据加载失败**：检查数据库文件是否存在
3. **权限不足**：确认用户角色是否正确
4. **功能不可用**：检查是否具有相应权限

### 技术支持
如遇到问题，请检查：
- 数据库连接状态
- 用户权限设置
- 系统日志信息
- 网络连接状态 